<?xml version="1.0" encoding="UTF-8"?>

<!-- 
	 TEMPLATE
	 <World>
		 <Region id="short" name="string">
			 <Settings dimx="short" dimy="short" area_percent="float" complexity="float" granularity="int" />
			 
			 
			 <ExitDirections north="bool" south="bool" west="bool" east="bool" />
			 
			 <Exits>
				 <Exit name="string" destination_region="string" destination_location="string" >
					 <Shape shape="RECT" extent_x="float" extent_y="float" />
					 OR
					 <Shape shape="CIRCLE" radius="float" />
				 </Exit>
				 ...
			 </Exits>
			 
			 <NamedObjectGroups>
				 <NameObjectGroup name="string" object_group="string" priority="int" />
				 ...
			 </NamedObjectGroups>
			 
			 <ObjectGroups>
				 <ObjectGroup object_group="string" priority="int" number="int" probability="float" />
				 ...
			 </ObjectGroups>	
			 
			 <Environments>
				 <Environment height="float" name="string" />
				 ...
			 </Environments>
			 
			 <SpawnGroups>
				 <SpawnGroup group_name="string" number="int" />
				 ...
			 </SpawnGroups>
			 
			 <ReviveLocation  location="string" />
			 
		 </Region>
	 </World>
-->
	 
	 <World>
		 <Region id="1001" name="sandbox">
			 <Settings dimx="16" dimy="16" area_percent="0.40" complexity="0.4" granularity="8" ground="grass1"/>
			 <ExitDirections north="false" south="true" west="false" east="false" />
			 <Exits>
				 <Exit name="exit_south" destination_region="region1" destination_location="entry_north" >
					 <Shape shape="RECT" extent_x="4.0" extent_y ="4.0" />
				 </Exit>
			 </Exits> 
			 <Environments>
				 <Environment height="0.6" name="meadow" />
				 <Environment height="1.0" name="hills" />
			 </Environments>
			 <ReviveLocation  location="entry_south" />
			
			 <Event trigger ="create_region" once = "true">
				 <Effect>
					 local pos = getLocation("entry_south");
					 pos[2] = pos[2]-12;
					 pos[1] = pos[1]+12;
					 addLocation('GuardLocation', pos);
					 addArea('GuardArea','circle',pos,12);
					 pos[2] = pos[2]-8;
					 pos[1] = pos[1]+8;
					 addLocation('SkelLocation', pos);
					 guard = createObject('guard','GuardLocation');
				 </Effect>
			 </Event>
			 <Event trigger ="player_moved" once = "true">
				 <Condition>
					 return (unitIsInArea(trigger.player,'GuardArea'))
				 </Condition>
				 <Effect>
					 skel = createObject('sword_skel','SkelLocation');
					 addUnitCommand(skel, "attack", guard)
				 </Effect>
			</Event>
		 </Region>
		 
		 <Region id="1002" name="spawnAbyss">
			 <Settings dimx="32" dimy="32" area_percent="0.3" complexity="0.4" granularity="6" ground="grass1"/>
			 <ExitDirections north="false" south="true" west="false" east="false" />
			 <Exits>
				 <Exit name="exit_south" destination_region="region1" destination_location="entry_north" >
					 <Shape shape="RECT" extent_x="4.0" extent_y ="4.0" />
				 </Exit>
			 </Exits> 
			 <Environments>
				 <Environment height="0.6" name="meadow" />
				 <Environment height="1.0" name="hills" />
			 </Environments>
			 <ReviveLocation  location="entry_south" />
			<SpawnGroups>
				<SpawnGroup group_name="allGoblins" number="10" />
			</SpawnGroups>
		</Region>
		 
		 <!-- soon to be tutorial-Region-->
		 <Region id="0" name="region0">
			 <Settings dimx="64" dimy="64" area_percent="0.30" complexity="0.4" granularity="8" ground="grass1"/>
			 
			 <ExitDirections north="true" south="true" west="false" east="false" />
			 
			 <Waypoint world_x="0.5" world_y ="0.5" />
			 
			 <Exits>
				 <Exit name="exit_south" destination_region="region1" destination_location="entry_north" >
					 <Shape shape="RECT" extent_x="4.0" extent_y ="4.0" />
				 </Exit>
				 
				 <!--<Exit name="exit_south" destination_region="testregion" destination_location="entry_north" >
					 <Shape shape="RECT" extent_x="4.0" extent_y ="4.0" />
				 </Exit>
				 -->
				 <Exit name="exit_north" destination_region="elCnlLobby" destination_location="entry_north" >
					 <Shape shape="RECT" extent_x="4.0" extent_y ="4.0" />
				 </Exit>
				 
			 </Exits>
			 <Environments>
				 <Environment height="0.6" name="meadow" />
				 <Environment height="1.0" name="hills" />
			 </Environments>
			 
			 <ObjectGroups>
				 <ObjectGroup object_group="herbalBushes_test" priority="10" number="2" probability="1.0" />
				 <ObjectGroup object_group="herbalBushes_test" priority="15" number="3" probability="0.7" />
			</ObjectGroups>
		
			 <ReviveLocation  location="entry_south" />
			 
			 <Event trigger ="create_region" once = "true">
				 <Effect>
					 local pos = getLocation("entry_south");
					 pos[2] = pos[2]-8;
					 addLocation('LichLocation', pos);
					 addLocation('TestLocation', pos);
					 addArea('LichArea','circle',pos,6);
				 </Effect>
			 </Event>
			 
			 <Event trigger ="create_region" once = "true">
				 <Effect>
					 local pos = getLocation("entry_south");
					 pos[2] = pos[2]-8;
					 peasant = createObject('peasant', pos);
					 setRefName(peasant,'peasant');
				 </Effect>
			 </Event>
			
			 <!--
			 <Event trigger ="player_moved" once = "true">
				 <Condition>
					 return (unitIsInArea(trigger.player,"LichArea"))
				</Condition>
				 <Effect>
					print("player is in area");
					createDialogue();
					addSpeaker(peasant,"peasant");
					addSpeaker(peasant,"peasant2");
					addSpeaker(trigger.player,"player");
					setTopicBase("peasant");
					changeTopic("topic1");
				 </Effect>
			 </Event>
			 -->
			 <!--
			 <Event trigger ="create_template">
				 <Condition>
					 return (trigger.templname == "herbalBushes_test")
				 </Condition>
				 <Effect>
					 local tree = createObject('$tree',trigger.herb );
					 createEvent("player_moved",true);
					 local condition = 'return (unitIsInArea(trigger.player,"circle",'..listToString(trigger.herb)..',6))';
					 addCondition(condition);
					 local effect = 'insertTrigger("herb_found"); addTriggerVariable("tree",'..tree..')';
					 addEffect(effect);
				 </Effect>
			 </Event>
			 
			 <Event trigger="herb_found">
				 <Effect>
					 deleteObject(trigger.tree);
				 </Effect>
			 </Event>
			 -->
			 <!--
				 <Event trigger ="player_moved" once = "true">
					 <Condition>
						 return (unitIsInArea(trigger.player,"LichArea"))
					 </Condition>
					 <Effect>
						 deleteObject(tree);
						 lich = createObject("lich", "LichLocation");
					 </Effect>
				 </Event>
				 
				 <Event trigger ="unit_die" once = "true">
					 <Condition>
						 return (trigger.unit == lich)
					 </Condition>
					 <Effect>
						 dropItem('demon_sw', getObjectValue(lich,'position'));
					 </Effect>
				 </Event>
			 -->
				 
				 
				 <!--
					 <Event trigger ="create_region" once = "true">
						 <Effect>
							 setDamageValue('trapdmg','fire_dmg',5,10);
							 trap_active = false;
						 </Effect>
					 </Event>
					 
					 <Event trigger ="player_moved">
						 <Condition>
							 return (unitIsInArea(trigger.player,'LichArea') and trap_active == false)
						 </Condition>
						 <Effect>
							 insertTrigger('trap_fire');
							 addTriggerVariable('goal',trigger.player);
						 </Effect>
					 </Event>
					 
					 <Event trigger ="trap_fire">
						 <Effect>
							 if unitIsInArea(trigger.goal,'LichArea') then
							 createProjectile('fire_ball','trapdmg',getObjectValue(tree,'position'),getObjectValue(trigger.goal,'position'),10.0,0.3 );
							 startTimer('trap_fire',2000);
							 addTriggerVariable('goal',trigger.goal);
							 trap_active = true;
							 else
							 trap_active = false;
							 end 
						 </Effect>
					 </Event>
					 -->
					 
					 <!--
						 <Event trigger ="player_moved" once="true">
							 <Condition>
								 return (unitIsInArea(trigger.player,'LichArea'))
							 </Condition>
							 <Effect>
								 setCutsceneMode(true);
								 pos = getLocation('LichLocation');
								 x = pos[1];
								 y = pos[2];
								 createObject('goblin' ,{x-5,y});
								 addCameraPosition(0,pos, 270,70, 20);
								 addCameraPosition(1000,pos, 0,45, 10);
								 addCameraPosition(1000,pos, 90,45, 10); 
								 addCameraPosition(1000,pos, 180,45, 10); 
								 addCameraPosition(1000,pos, 270,45, 10); 
								 addCameraPosition(2000,pos, 270,70, 20);
							 </Effect>
						 </Event>
						 
						 <Event trigger ="command_complete" once="true">
							 <Condition>
								 return (trigger.command == 'attack')
							 </Condition>
							 <Effect>
								 setCutsceneMode(false);
							 </Effect>
						 </Event>
						 
						 <Event trigger ="camera_move_complete" once="true">
							 <Effect>
								 print("camera movement complete");
							 </Effect>
						 </Event>
						 -->
						 <!--
						 <Event trigger ="player_moved" once="true">
							 <Condition>
								 return (unitIsInArea(trigger.player,'LichArea'))
							 </Condition>
							 <Effect>
								 startTimer("test",10000);
							 </Effect>
						 </Event>
						 
						 <Event trigger ="test">
							 <Effect>
								 teleportPlayer(53,"region0","LichLocation");
							 </Effect>
						 </Event>
						 -->
					 </Region>
					 
		<Region id="1000" name="testregion">
			
			<Waypoint world_x="0.4" world_y ="0.4" />
		
			<Settings dimx="8" dimy="8" region_template="test" />
			
			<Exits>
				<Exit name="exit_north" destination_region="region0" destination_location="entry_south" >
					<Shape shape="RECT" extent_x="4.0" extent_y ="4.0" />
				</Exit>
			</Exits>
			
			<Environments>
				<Environment height="0.2" name="meadow" />
			</Environments>
			<ReviveLocation  location="center" />
			
		</Region>	
		
		<Region id="1" name="region1">
			
			<Settings dimx="32" dimy="32" area_percent="0.35" complexity="0.4" granularity="8" />
			
			<HeroLight red="0" green="0" blue="0" />
			<AmbientLight red="0" green="0" blue="0" />
			<DirectionalLight red="1.0" green="1.0" blue="1.0" />
			
			<ExitDirections north="true" south="false" west="false" east="false" />
			
			<Exits>
				<Exit name="exit_north" destination_region="region0" destination_location="entry_south" >
					<Shape shape="RECT" extent_x="4.0" extent_y ="4.0" />
				</Exit>
			</Exits>
			
			<NamedObjectGroups>
				<NameObjectGroup name="ort1" object_group="test2" priority="4" />
				<NameObjectGroup name="ort2" object_group="test1" priority="3" />
				<NameObjectGroup name="ort3" object_group="test1" priority="2" />
			</NamedObjectGroups>
			
			<ObjectGroups>
				<ObjectGroup object_group="trees3" priority="4" number="2" probability="1.0" />
				<ObjectGroup object_group="trees2" priority="2" number="5" probability="0.7" />
				<ObjectGroup object_group="trees1" priority="1" number="50" probability="0.5" />
			</ObjectGroups>
			
			<Environments>
				<Environment height="0.2" name="meadow" />
				<Environment height="1.0" name="hills" />
			</Environments>
			
			<SpawnGroups>
				<SpawnGroup group_name="lich_skeletons" number="1" />
				<SpawnGroup group_name="goblins" number="10" />
				<SpawnGroup group_name="goblins_dogs" number="10" />
			</SpawnGroups>
			
			<Event trigger ="create_region" once = "true">
				<Effect>
					lich = createObject("lich", "ort1:center");
				</Effect>
			</Event>
			
			<Event trigger ="create_region" once = "true">
				<Effect>
					lich = createObject("lich", "ort2:center");
				</Effect>
			</Event>
			
			<Event trigger ="create_region" once = "true">
				<Effect>
					lich = createObject("lich", "ort3:center");
				</Effect>
			</Event>
			
		</Region>
					 
</World>	