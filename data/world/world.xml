<?xml version="1.0" encoding="UTF-8"?>

<!-- TEMPLATE
<World>
	<Region id="short" name="string">
		<Settings dimx="short" dimy="short" area_percent="float" complexity="float" granularity="int" />
		
		
		<ExitDirections north="bool" south="bool" west="bool" east="bool" />
		
		<Exits>
			<Exit name="string" destination_region="string" destination_location="string" >
				<Shape shape="RECT" extent_x="float" extent_y="float" />
				OR
				<Shape shape="CIRCLE" radius="float" />
			</Exit>
			...
		</Exits>
		
		<NamedObjectGroups>
			<NameObjectGroup name="string" object_group="string" priority="int" />
			...
		</NamedObjectGroups>
	
		<ObjectGroups>
			<ObjectGroup object_group="string" priority="int" number="int" probability="float" />
			...
		</ObjectGroups>	
		
		<Environments>
			<Environment height="float" name="string" />
			...
		</Environments>
		
		<SpawnGroups>
			<SpawnGroup group_name="string" number="int" />
			...
		</SpawnGroups>
		
		<ReviveLocation  location="string" />
		
	</Region>
</World>
-->



<World  start_region="region0" start_location="entry_south">
	
<!-- soon to be tutorial-Region-->
	<Region id="0" name="region0">
		<Settings dimx="64" dimy="64" area_percent="0.35" complexity="0.4" granularity="8" ground="grass1"/>
		
		<ExitDirections north="true" south="true" west="false" east="false" />
		
		<Exits>
			<Exit name="exit_south" destination_region="region1" destination_location="entry_north" >
				<Shape shape="RECT" extent_x="4.0" extent_y ="4.0" />
			</Exit>
			
			<!--<Exit name="exit_south" destination_region="testregion" destination_location="entry_north" >
				<Shape shape="RECT" extent_x="4.0" extent_y ="4.0" />
			</Exit>
			-->
			<Exit name="exit_north" destination_region="elCnlLobby" destination_location="entry_north" >
				<Shape shape="RECT" extent_x="4.0" extent_y ="4.0" />
			</Exit>
			
		</Exits>
		<Environments>
			<Environment height="0.6" name="meadow" />
			<Environment height="1.0" name="hills" />
		</Environments>
		
		<ReviveLocation  location="entry_south" />
		
		<Event trigger ="create_region" once = "true">
			<Effect>
				addLocation('LichLocation', {130,212});
				addLocation('TestLocation', {130,217});
				addArea('LichArea','circle',{130,212},6);
				tree = createObject('$tree', 'LichLocation');
			</Effect>
		</Event>
		
		<Event trigger ="create_region" once = "true">
			<Effect>
				peasant = createObject('peasant', {130,210});
				setRefName(peasant,'peasant');
			</Effect>
		</Event>
		
		<Event trigger ="player_moved" once = "true">
			<Condition>
				return (unitIsInArea(trigger.player,"LichArea"))
			</Condition>
			<Effect>
				createDialogue();
				addSpeaker(trigger.player,'warrior');
				addSpeaker(peasant, 'lumberjack');
				changeTopic('tree');
			</Effect>
		</Event>
		
		
		<!--
		<Event trigger ="player_moved" once = "true">
			<Condition>
				return (unitIsInArea(trigger.player,"LichArea"))
			</Condition>
			<Effect>
				deleteObject(tree);
				lich = createObject("lich", "LichLocation");
			</Effect>
		</Event>
		
		<Event trigger ="unit_die" once = "true">
			<Condition>
				return (trigger.unit == lich)
			</Condition>
			<Effect>
				dropItem('demon_sw', getObjectValue(lich,'position'));
			</Effect>
		</Event>
		-->
		
		
		<!--
		<Event trigger ="create_region" once = "true">
			<Effect>
				setDamageValue('trapdmg','fire_dmg',5,10);
				trap_active = false;
			</Effect>
		</Event>
		
		<Event trigger ="player_moved">
			<Condition>
				return (unitIsInArea(trigger.player,'LichArea') and trap_active == false)
			</Condition>
			<Effect>
				insertTrigger('trap_fire');
				addTriggerVariable('goal',trigger.player);
			</Effect>
		</Event>
		
		<Event trigger ="trap_fire">
			<Effect>
				if unitIsInArea(trigger.goal,'LichArea') then
					createProjectile('fire_ball','trapdmg',getObjectValue(tree,'position'),getObjectValue(trigger.goal,'position'),10.0,0.3 );
					startTimer('trap_fire',2000);
					addTriggerVariable('goal',trigger.goal);
					trap_active = true;
				else
					trap_active = false;
				end 
			</Effect>
		</Event>
		-->
		
		<!--
		<Event trigger ="player_moved" once="true">
			<Condition>
				return (unitIsInArea(trigger.player,'LichArea'))
			</Condition>
			<Effect>
				setCutsceneMode(true);
				pos = getLocation('LichLocation');
				x = pos[1];
				y = pos[2];
				createObject('goblin' ,{x-5,y});
				addUnitCommand(trigger.player,'walk',2000,{x+4,y});
				addUnitCommand(trigger.player,'walk',1900,{x,y-4});
				addUnitCommand(trigger.player,'walk',1800,{x-4,y});
				addUnitCommand(trigger.player,'walk',1700,{x,y+4});
				addUnitCommand(trigger.player,'walk',1700,{x,y});
				addUnitCommand(trigger.player,'attack',1700,{x,y});
				addCameraPosition(0,pos, 270,70, 20);
				addCameraPosition(1000,pos, 0,45, 10);
				addCameraPosition(1000,pos, 90,45, 10); 
				addCameraPosition(1000,pos, 180,45, 10); 
				addCameraPosition(1000,pos, 270,45, 10); 
				addCameraPosition(2000,pos, 270,70, 20);
			</Effect>
		</Event>
		
		<Event trigger ="command_complete" once="true">
			<Condition>
				return (trigger.command == 'attack')
			</Condition>
			<Effect>
				deleteObject(tree);
				setCutsceneMode(false);
			</Effect>
		</Event>
		-->
	</Region>
	
	<Region id="1000" name="testregion">
		
		<Settings dimx="8" dimy="8" region_template="test" />

		<Exits>
			<Exit name="exit_north" destination_region="region0" destination_location="entry_south" >
				<Shape shape="RECT" extent_x="4.0" extent_y ="4.0" />
			</Exit>
		</Exits>
		
		<Environments>
			<Environment height="0.2" name="meadow" />
		</Environments>
		
		<Event trigger ="create_region" once = "true">
			<Effect>
				createObject("$tree", "treeloc");
			</Effect>
		</Event>
		
	</Region>	
	
	<Region id="1" name="region1">
		
		<Settings dimx="32" dimy="32" area_percent="0.35" complexity="0.4" granularity="8" />
		
		<ExitDirections north="true" south="false" west="false" east="false" />
		
		<Exits>
			<Exit name="exit_north" destination_region="region0" destination_location="entry_south" >
				<Shape shape="RECT" extent_x="4.0" extent_y ="4.0" />
			</Exit>
		</Exits>
		
		<NamedObjectGroups>
			<NameObjectGroup name="ort1" object_group="test2" priority="4" />
			<NameObjectGroup name="ort2" object_group="test1" priority="3" />
			<NameObjectGroup name="ort3" object_group="test1" priority="2" />
		</NamedObjectGroups>
	
		<ObjectGroups>
			<ObjectGroup object_group="trees3" priority="4" number="2" probability="1.0" />
			<ObjectGroup object_group="trees2" priority="2" number="5" probability="0.7" />
			<ObjectGroup object_group="trees1" priority="1" number="50" probability="0.5" />
		</ObjectGroups>
		
		<Environments>
			<Environment height="0.2" name="meadow" />
			<Environment height="1.0" name="hills" />
		</Environments>
		
		<SpawnGroups>
			<SpawnGroup group_name="lich_skeletons" number="1" />
			<SpawnGroup group_name="goblins" number="10" />
			<SpawnGroup group_name="goblins_dogs" number="10" />
		</SpawnGroups>
		
		<Event trigger ="create_region" once = "true">
			<Effect>
				lich = createObject("lich", "ort1:center");
			</Effect>
		</Event>
		
		<Event trigger ="create_region" once = "true">
			<Effect>
				lich = createObject("lich", "ort2:center");
			</Effect>
		</Event>
		
		<Event trigger ="create_region" once = "true">
			<Effect>
				lich = createObject("lich", "ort3:center");
			</Effect>
		</Event>

	</Region>

<!-- Lobby Konzilshalle der Elemtarmagier [fester Ort; Saeulenhalle im roemischen Stil] -->
<!-- Orte: Soren Windclaw -->
	<Region id="2" name="elCnlLobby">
		<Settings dimx="8" dimy="8" region_template="councilhall"/>
		<ExitDirections north="true" south="false" west="false" east="false" />
		<Exits>
			<Exit name="exit_north" destination_region="medMercCamp" destination_location="entry_south" >
				<Shape shape="RECT" extent_x="4.0" extent_y ="4.0" />
			</Exit>
		</Exits>
			
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>
	</Region>
	
<!-- Medair, Soeldnerlager [Stadt]-->
<!-- Orte: Fenor Marken -->
	<Region id="3" name="medMercCamp">
		<Settings dimx="16" dimy="16" region_template="medairMercenaryCamp" />
		
		<ExitDirections north="true" south="true" west="false" east="false" />
		
		<Exits>
			<Exit name="exit_south" destination_region="elCnlLobby" destination_location="entry_north" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>

			<Exit name="exit_north" destination_region="aisMeadow" destination_location="entry_south" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>
		
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>		
		
		<ReviveLocation  location="entry_south" />
		
		<Event trigger ="create_region" once = "true">
			<Effect>
				fenor = createObject('peasant', 'locFenor');
				addArea('FenorArea','circle','locFenor',5);
				setRefName(fenor, 'Fenor Marken');
			</Effect>
		</Event>
	</Region>
	
<!-- Aisen, Aisener Wiesen [Feld und Wiesen]; ungefaehr eine viertel Stunde, eher offen; Level 1 - 3 -->
<!-- Orte: verwundeter Soldat, Template -->
<!-- Goblinschlaeger, Goblinraeuber, Goblinjaeger-->
	<Region id="4" name="aisMeadow">
		<Settings dimx="32" dimy="32" area_percent="0.4" complexity="0.3" granularity="6" />
		
		<ExitDirections north="true" south="true" west="false" east="false" />
		
		<Exits>
			<Exit name="exit_south" destination_region="medMercCamp" destination_location="entry_north" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
			<Exit name="exit_north" destination_region="aisPlains" destination_location="entry_south" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>
		
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>

		<NamedObjectGroups>
			<NameObjectGroup name="willard" object_group="willard" priority="4"/>
		</NamedObjectGroups>
	</Region>

<!-- Aisen, Offene Ebene [Feld und Wiesen]; ungefaehr 20 Min, eher offen; Level 2 - 6 -->
<!-- Goblinschlaeger, Goblinraeuber, Goblinjaeger, Goblinhunde, Feldalraunen?(falls wir welche bekommen) -->
<!-- Orte: entry_Crypt, exit_Crypt => Maylons Grab(Template) -->
	<Region id="5" name="aisPlains">
		<Settings dimx="32" dimy="32" area_percent="0.4" complexity="0.3" granularity="6" />
		
		<ExitDirections north="false" south="true" west="false" east="true" />
		
		<Exits>
			<Exit name="exit_south" destination_region="aisMeadow" destination_location="entry_north" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
			<Exit name="exit_east" destination_region="aisHeath" destination_location="entry_west" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
			<Exit name="exit_crypt" destination_region="aisMaylonsGraveL1" destination_location="entry_south" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>

		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>
		
		<NamedObjectGroups>
			<NameObjectGroup name="maylonsGrave" object_group="maylonsGrave" priority="4"/>
		</NamedObjectGroups>

	</Region>
	
<!-- Maylons Grab, Ebene 1[unterirdisch], ungefaehr 10 Minuten; Level 14 - 17 -->
<!-- [kleine Elementare], Zombies, Skelette -->
	<Region id="15" name="aisMaylonsGraveL1">
		<Settings dimx="32" dimy="32" area_percent="0.4" complexity="0.3" granularity="6" />
		
		<ExitDirections north="true" south="true" west="false" east="false" />
		
		<Exits>
			<Exit name="exit_south" destination_region="aisPlains" destination_location="entry_crypt" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
			<Exit name="exit_north" destination_region="aisMaylonsGraveL2" destination_location="entry_north" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>
		
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>
		
		<!-- in der Nähe des Eingangs -->
		<NamedObjectGroups>
			<NameObjectGroup name= "cryptGobins" object_group="maylonsGraveL1Goblins" priority="4"/>
		</NamedObjectGroups>
	</Region>
	
<!-- Maylons Grab, Ebene 2[unterirdisch], ungefaehr 10 Minuten; Level 16 - 19 -->
<!-- [kleine Elementare], Zombies, Skelette, Maylons Mumie -->
<!-- Orte: Maylons Grabkammer -->
	<Region id="16" name="aisMaylonsGraveL2">
		<Settings dimx="32" dimy="32" area_percent="0.4" complexity="0.3" granularity="6" />
		
		<ExitDirections north="true" south="false" west="false" east="false" />
		
		<Exits>
			<Exit name="exit_north" destination_region="aisMaylonsGraveL1" destination_location="entry_north" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>
		
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>
		
		<NamedObjectGroups>
			<NameObjectGroup name="graveChamber" object_group="maylonsGraveL2Chamber" priority="4"/>
		</NamedObjectGroups>
	</Region>	
	
<!-- Aisen, Stille Heide [Feld und Wiesen]; ungefaehr 20 Min, eher offen; Level 5 - 10 -->
<!-- Goblinschlaeger, Goblinraeuber, Goblinjaeger, Goblinhunde, Goblinkrieger, Goblinschamanen? -->
	<Region id="6" name="aisHeath">
		<Settings dimx="32" dimy="32" area_percent="0.4" complexity="0.3" granularity="6" />
		
		<ExitDirections north="true" south="false" west="true" east="false" />
		
		<Exits>
			<Exit name="exit_west" destination_region="aisPlains" destination_location="entry_east" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
			<Exit name="exit_north" destination_region="joringsbridge" destination_location="entry_south" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>
		
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>
	</Region>
	
<!-- Aisen, Joringsbrueck [laendliches Dorf] -->
<!-- erstes Treffen mit dem Prinzen -->
<!-- Der belagerte Bauernhof -->
<!-- Rob, der Raeuber, Anfang -->
<!-- Prinz, Ratgeber, Magier, Bauer, Sergeant -->
<!-- Kraeutersammler -->
	<Region id="7" name="joringsbridge">
		<Settings dimx="32" dimy="32" region_template="joringsbridge"/>
		
		<ExitDirections north="true" south="true" west="true" east="false" />
		
		<Exits>
			<Exit name="exit_south" destination_region="aisHeath" destination_location="entry_north" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
			<Exit name="exit_north" destination_region="aisJoringsforest" destination_location="entry_south" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
			<Exit name="exit_west" destination_region="aisNorthMeadow" destination_location="entry_east" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>
		
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>
	</Region>

<!-- Aisen, Noerdliche Wiese [Feld und Wiesen]; ungefaehr 20 Min, eher offen; Level 7 - 12; Sidequests aus Joringsbr�ck -->
<!-- Der Bauernhof(Template) -->
<!-- Kraeuterbuesche -->
<!-- Goblinschlaeger, Goblinraeuber, Goblinjaeger, Goblinhunde, Goblinkrieger, Goblinschamanen? -->
	<Region id="8" name="aisNorthMeadow">
		<Settings dimx="32" dimy="32" area_percent="0.4" complexity="0.3" granularity="6" />
		
		<ExitDirections north="false" south="false" west="false" east="true" />
		
		<Exits>
			<Exit name="exit_east" destination_region="joringsbridge" destination_location="entry_west" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>
		
		<NamedObjectGroups>
			<NameObjectGroup object_group="michelsFarm" priority="4"/>
		</NamedObjectGroups>
		
		<ObjectGroups>
			<ObjectGroup object_group="herbalBushes" priority="4" number="10" probability="1.0" />
			<ObjectGroup object_group="herbalBushes" priority="3" number="15" probability="0.7" />
		</ObjectGroups>
		
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>
	</Region>	
	
<!-- Aisen, Joringsforst [Wald und Wiesen]; ungefaehr 30 Min, halbwegs offen; Level 7 - 12 -->	
<!-- Goblinschlaeger, Goblinraeuber, Goblinjaeger, Goblinhunde, Goblinkrieger, Goblinschamanen?, Waldalraunen? -->
	<Region id="9" name="aisJoringsforest">
		<Settings dimx="32" dimy="32" area_percent="0.4" complexity="0.3" granularity="6" />
		
		<ExitDirections north="false" south="true" west="true" east="false" />
		
		<Exits>
			<Exit name="exit_south" destination_region="joringsbridge" destination_location="entry_north" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
			<Exit name="exit_west" destination_region="aisFairyforest" destination_location="entry_east" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>
		
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>
	</Region>
	
<!-- Aisen, Feenwald [Wald und Steine]; ungefaehr 60 Min, eher verwinkelt; Level 10 - 16 -->
<!-- Robs Versteck(Template) -->
<!-- Goblinschlaeger, Goblinraeuber, Goblinjaeger, Goblinhunde, Goblinkrieger, Goblinschamanen?, Waldalraunen?, Feen? -->
	<Region id="10" name="aisFairyforest">
		<Settings dimx="32" dimy="32" area_percent="0.4" complexity="0.3" granularity="6" />
		
		<ExitDirections north="true" south="false" west="false" east="true" />
		
		<Exits>
			<Exit name="exit_east" destination_region="aisJoringsforest" destination_location="entry_west" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
			<Exit name="exit_north" destination_region="aisWolfstones" destination_location="entry_south" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>
		
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>
		
		<NamedObjectGroups>
			<NameObjectGroup name="robsHideout" object_group="robsHideout" priority="4"/>
		</NamedObjectGroups>
	</Region>
	
<!-- Aisen, Wolfsfelsen [Wald und Gebirge]; ungefaehr 35 Min, eher verwinkelt; Level 14 - 17 -->
<!-- Goblinschlaeger, Goblinraeuber, Goblinjaeger, Goblinhunde, Goblinkrieger, Goblinschamanen?, Harpien, wenige Untote, evtl. ein Lcih oder Neromant -->
	<Region id="11" name="aisWolfstones">
		<Settings dimx="32" dimy="32" area_percent="0.4" complexity="0.3" granularity="6" />
		
		<ExitDirections north="true" south="true" west="false" east="false" />
		
		<Exits>
			<Exit name="exit_south" destination_region="aisFairyforest" destination_location="entry_north" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
			<Exit name="exit_north" destination_region="dwarfenfroward" destination_location="entry_south" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>
		
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>
	</Region>
	
<!-- Aisen, Zwergentrutz [Grenzfeste] -->
<!-- Entsatz -->
<!-- Der Lich -->
<!-- Rob, der Raeuber, Ende -->
<!-- Loc: Stadtmauer -->
	<Region id="12" name="dwarfenfroward">
		<Settings dimx="32" dimy="32" region_template="dwarfenfroward"/>
		
		<ExitDirections north="true" south="true" west="false" east="false" />
		
		<Exits>
			<Exit name="exit_south" destination_region="aisWolfstones" destination_location="entry_north" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
			<Exit name="exit_north" destination_region="necFieldcamp" destination_location="entry_south" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
			<Exit name="exit_rampart" destination_region="dwarfenfrowardRampart" destination_location="entry_south" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>
		
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>
		
	</Region>
	
<!-- Aisen, Zwergentrutz Stadtmauer; ungef�hr 20 min, relativ starres Design; Level 16 - 19 -->
<!-- Zombies, Skelette -->
<!-- Locations fuer die Verteidigenden Wachen? -->
	<Region id="13" name="dwarfenfrowardRampart">
		<Settings dimx="8" dimy="32" area_percent="0.4" complexity="0.3" granularity="6" />
		
		<ExitDirections north="true" south="true" west="false" east="false" />
		
		<Exits>
			<Exit name="exit_south" destination_region="dwarfenfroward" destination_location="entry_rampart" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>
		
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>
	</Region>
	
<!-- Necroria, Feldlager [Wiesen und Brachland]; ungefaehr 25 Min, eher verwinkelt; Level 17 - 20 -->
<!-- Ende der Demo, der Lich als quasi-Endgegner -->
<!-- Zombies, Skelette, Liche/Nekromanten?, DER Lich-->
	<Region id="14" name="necFieldcamp">
		<Settings dimx="32" dimy="32" area_percent="0.4" complexity="0.3" granularity="6" />
		
		<ExitDirections north="false" south="true" west="false" east="false" />
		
		<Exits>
			<Exit name="exit_south" destination_region="dwarfenfroward" destination_location="entry_north" >
				<Shape shape="RECT" extent_x="4.0" extent_y="4.0" />
			</Exit>
		</Exits>
		
		<Environments>
			<Environment height="1.0" name="meadow" />
		</Environments>
		
		<NamedObjectGroups>
			<NameObjectGroup name="powerlich" object_group="powerlich" priority="4" />
		</NamedObjectGroups>
	
	</Region>
</World>


