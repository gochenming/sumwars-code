<Quest name="scene4" table_name="scene4">
	
	<Init>
		local a = 2
	</Init>
	
	<Description>
		if (scene4.finished) then
			return _("Quest finished")
		else
			return _("Quest description")
		end
	</Description>
	
	<NPC refname="Soren Windclaw">
		<Topic name="scene4_dialogue">
			<Effect>
				addCameraPosition(0,get(getRole("PL"),"position"),20,40,20);
				addCameraPosition(20000,get(getRole("PL"),"position"),220,60,30);

				-- Mitten auf der Landstra√üe springt der Kristall auf und SW meldet sich

				speak("PL",_("Was ist denn jetzt?"),1500);
				speak("SW",_("Ihr muesst jetzt sofort"),1500);
				speak("ANYast",_("Wer?"),1500);
				speak("SW",_("Die Erzmaga Ireana von Nordenburg"),1500);
				speak("ARCast",_("Wird das extra bezahlt?"),1500);
				speak("MAGast",_("Wie bitte? Ich dachte das"),1500);
				speak("SW",_("Jetzt fangt nicht an zu diskutieren"),1500);
				speak("PL",_("Was meint ihr Freunde,"),1500);
				speak("MAGast",_("Weiss nicht so genau..."),1500);
				speak("ARCast",_("Wird das extra bezahlt?"),1500);
				speak("SW",_("Argh! Muss ich euch erst"),1500);
				speak("PL",_("Schon gut, spare deinen Atem"),1500);

				-- Am Nordausgang der Wolfssteine sollte jetzt ein Event aktiv sein, dass den Spielern das Betreten von Zwergentrutz verbietet.
				
				jumpTopic("remove_soren");
				changeTopic("end_cutscene4");
			</Effect>
		</Topic>
		
		<Topic name="remove_soren">
			<Effect>
				deleteObject(scene4_tmp.soren_windclaw_crystal);
			</Effect>
		</Topic>
		
		<Topic name="end_cutscene4">
			<Effect>
				scene4.scene4 = true;
				setCutsceneMode(false);
			</Effect>
		</Topic>
	</NPC>
	
	
	<Region name="aisWolfstones">
		<Event trigger="create_region" once="true">
			<Effect>
				addArea("aisWolfstonesEntrySouthArea","circle","entry_south",5);
			</Effect>
		</Event>
		
		<Event trigger="player_moved" once="true">
			<Condition>
				if (besieged_farm.scene3 == true and scene4.scene4 ~= true) then
					return (unitIsInArea(trigger.player,"aisWolfstonesEntrySouthArea"));
				else
					return false;
				end;
			</Condition>
			<Effect>
				scene4_tmp.soren_windclaw_crystal = createObject("peasant", "entry_south");
				setRefName(scene4_tmp.soren_windclaw_crystal, "Soren Windclaw");
				createDialogue();
				addSpeaker(scene4_tmp.soren_windclaw_crystal,"SW");
				addSpeaker(trigger.player,"Player");
				addStandardSpeakers("aisWolfstones","entry_south");
				setCutsceneMode(true);
				setTopicBase("Soren Windclaw");
				changeTopic("scene4_dialogue");
			</Effect>
		</Event>
	</Region>
	
</Quest>

